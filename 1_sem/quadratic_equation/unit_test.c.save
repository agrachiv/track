#include "q_eq_solver.c"

#include <ctime>
#define number_of_tests 10000
#define input_number_limit 10

int main () {

    double root1, root2;
    double* root1_ptr = &root1;
    double* root2_ptr = &root2;
    int a, x1, x2; //a(x - x1)(x - x2) = ax^2 + (-a(x1+x2))x + ax1x2

    for (int i = 0; i < number_of_tests; i++) {
        srand (time (NULL) + i);
        a = -1 * number_limit + rand() % (2 * number_limit);
        x1 = -1 * number_limit + rand() % (2 * number_limit);
        x2 = -1 * number_limit + rand() % (2 * number_limit);
        root1_ptr = &root1;
        root2_ptr = &root2;
        q_eq_solver (a, -1 * a * (x1 + x2), a * x1 * x2, &root1_ptr, &root2_ptr);

        printf ("input equation: %d(x - %d)(x - %d)\n", a, x1, x2);

        if (a == 0 && root1_ptr == NULL && root2_ptr == NULL) printf ("success\n");
        else if ((root1 == x1 && root2 == x2) || (root2 == x1 && root1 == x2)) printf ("success\n");
        else {
            printf ("unit test failed\n returned roots are: %e %e\n", root1, root2);
            break;
        }
    }

    printf ("-----------------------------------\nAll unit tests succeeded\n");
    return 0;
}
